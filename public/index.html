<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üå∏ Maid Bot Dashboard</title>
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #333;
      min-height: 100vh;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }

    header {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    h1 {
      color: #667eea;
      font-size: 2em;
    }

    .status-badge {
      background: #10b981;
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: bold;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .stat-card {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .stat-card h3 {
      color: #666;
      font-size: 0.9em;
      margin-bottom: 10px;
      text-transform: uppercase;
    }

    .stat-value {
      font-size: 2.5em;
      font-weight: bold;
      color: #667eea;
    }

    .stat-label {
      color: #999;
      font-size: 0.9em;
      margin-top: 5px;
    }

    .content-grid {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }

    .card {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .card h2 {
      color: #667eea;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .device-list {
      max-height: 400px;
      overflow-y: auto;
    }

    .device-item {
      padding: 12px;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .device-item:hover {
      background: #f9fafb;
    }

    .device-info {
      flex: 1;
    }

    .device-name {
      font-weight: bold;
      color: #333;
    }

    .device-details {
      font-size: 0.85em;
      color: #666;
      margin-top: 4px;
    }

    .status-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      display: inline-block;
      margin-right: 8px;
    }

    .status-online {
      background: #10b981;
    }

    .status-offline {
      background: #ef4444;
    }

    .task-item {
      padding: 12px;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .task-info {
      flex: 1;
    }

    .task-name {
      font-weight: bold;
      color: #333;
    }

    .task-schedule {
      font-size: 0.85em;
      color: #666;
      margin-top: 4px;
    }

    .task-enabled {
      background: #10b981;
      color: white;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 0.85em;
    }

    .task-disabled {
      background: #9ca3af;
      color: white;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 0.85em;
    }

    .chart-container {
      position: relative;
      height: 300px;
      margin-top: 20px;
    }

    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      border-bottom: 2px solid #e5e7eb;
    }

    .tab {
      padding: 10px 20px;
      cursor: pointer;
      border: none;
      background: none;
      color: #666;
      font-size: 1em;
      border-bottom: 3px solid transparent;
      transition: all 0.3s;
    }

    .tab:hover {
      color: #667eea;
    }

    .tab.active {
      color: #667eea;
      border-bottom-color: #667eea;
      font-weight: bold;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    button {
      background: #667eea;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1em;
      transition: background 0.3s;
    }

    button:hover {
      background: #5568d3;
    }

    .refresh-btn {
      background: #10b981;
    }

    .refresh-btn:hover {
      background: #059669;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 10px;
      max-width: 500px;
      width: 90%;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }

    .modal-content h3 {
      margin-top: 0;
      color: #667eea;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      color: #666;
      font-weight: 500;
    }

    .form-group input,
    .form-group select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 1em;
      transition: border-color 0.3s;
    }

    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: #667eea;
    }

    .button-group {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .button-group button {
      flex: 1;
    }

    .user-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      margin-bottom: 10px;
      transition: background 0.3s;
    }

    .user-item:hover {
      background: #f9fafb;
    }

    .role-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 0.85em;
      font-weight: bold;
      color: white;
    }

    .role-admin {
      background: #ef4444;
    }

    .role-operator {
      background: #f59e0b;
    }

    .role-viewer {
      background: #10b981;
    }

    .user-actions {
      display: flex;
      gap: 5px;
      align-items: center;
    }

    .user-actions select {
      padding: 5px 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 0.9em;
    }

    .user-actions button {
      padding: 5px 10px;
      font-size: 0.85em;
    }

    @media (max-width: 768px) {
      .content-grid {
        grid-template-columns: 1fr;
      }
      
      .user-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      
      .user-actions {
        width: 100%;
        justify-content: flex-end;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üå∏ Maid Bot Dashboard</h1>
      <div style="display: flex; gap: 10px; align-items: center;">
        <div class="status-badge">‚óè ONLINE</div>
        <button onclick="logout()" style="background: #ef4444; padding: 8px 16px;">Logout</button>
      </div>
    </header>

    <div class="stats-grid">
      <div class="stat-card">
        <h3>üì° Network Devices</h3>
        <div class="stat-value" id="totalDevices">0</div>
        <div class="stat-label"><span id="onlineDevices">0</span> online</div>
      </div>
      <div class="stat-card">
        <h3>‚¨áÔ∏è Download Speed</h3>
        <div class="stat-value" id="downloadSpeed">--</div>
        <div class="stat-label">Mbps</div>
      </div>
      <div class="stat-card">
        <h3>‚¨ÜÔ∏è Upload Speed</h3>
        <div class="stat-value" id="uploadSpeed">--</div>
        <div class="stat-label">Mbps</div>
      </div>
      <div class="stat-card">
        <h3>‚è∞ Active Tasks</h3>
        <div class="stat-value" id="activeTasks">0</div>
        <div class="stat-label"><span id="totalTasks">0</span> total</div>
      </div>
    </div>

    <div class="tabs">
      <button class="tab active" onclick="switchTab('devices')">üì° Network</button>
      <button class="tab" onclick="switchTab('speedtest')">üöÄ Speed Tests</button>
      <button class="tab" onclick="switchTab('tasks')">‚è∞ Scheduled Tasks</button>
      <button class="tab" onclick="switchTab('homeassistant')">üè† Smart Home</button>
      <button class="tab" onclick="switchTab('plugins')">üîå Plugins</button>
      <button class="tab" onclick="switchTab('research')">üìö Research</button>
      <button class="tab" onclick="switchTab('settings')">‚öôÔ∏è Settings</button>
    </div>

    <div id="devices-tab" class="tab-content active">
      <div class="content-grid">
        <div class="card">
          <h2>
            üì° Unified Network Scan
            <button class="refresh-btn" onclick="refreshDevices()">üîÑ Scan Now</button>
          </h2>
          
          <!-- Network Stats -->
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px; padding: 15px; background: #f9fafb; border-radius: 8px;">
            <div>
              <div style="font-size: 0.85em; color: #666;">Total Devices</div>
              <div style="font-size: 1.5em; font-weight: bold; color: #667eea;" id="networkTotal">0</div>
            </div>
            <div>
              <div style="font-size: 0.85em; color: #666;">üè† Local Network</div>
              <div style="font-size: 1.5em; font-weight: bold; color: #10b981;" id="networkLocal">0</div>
            </div>
            <div>
              <div style="font-size: 0.85em; color: #666;">üåê Tailscale</div>
              <div style="font-size: 1.5em; font-weight: bold; color: #8b5cf6;" id="networkTailscale">0</div>
            </div>
          </div>
          
          <!-- Sub-tabs for network types -->
          <div style="display: flex; gap: 10px; margin-bottom: 15px; border-bottom: 2px solid #e5e7eb;">
            <button class="network-tab active" onclick="switchNetworkTab('all')" style="padding: 8px 16px; border: none; background: none; cursor: pointer; border-bottom: 3px solid #667eea; color: #667eea; font-weight: bold;">
              All Devices
            </button>
            <button class="network-tab" onclick="switchNetworkTab('local')" style="padding: 8px 16px; border: none; background: none; cursor: pointer; border-bottom: 3px solid transparent; color: #666;">
              üè† Local
            </button>
            <button class="network-tab" onclick="switchNetworkTab('tailscale')" style="padding: 8px 16px; border: none; background: none; cursor: pointer; border-bottom: 3px solid transparent; color: #666;">
              üåê Tailscale
            </button>
          </div>
          
          <div class="device-list" id="deviceList">
            <p style="text-align: center; color: #999; padding: 20px;">Loading devices...</p>
          </div>
        </div>
        <div class="card">
          <h2>üìä Network Overview</h2>
          <canvas id="deviceChart"></canvas>
          
          <div style="margin-top: 30px;">
            <h3 style="font-size: 1.1em; color: #667eea; margin-bottom: 10px;">üí° Quick Actions</h3>
            <button onclick="wakeAllPCs()" style="width: 100%; margin-bottom: 10px; background: #8b5cf6;">
              üíª Wake All PCs
            </button>
            <button onclick="scanNetwork()" style="width: 100%; margin-bottom: 10px; background: #10b981;">
              üîç Scan Network
            </button>
            <button onclick="runSpeedTest()" style="width: 100%; margin-bottom: 10px; background: #f59e0b;">
              üöÄ Run Speed Test
            </button>
            <button onclick="showNameDeviceModal()" style="width: 100%; margin-bottom: 10px;">
              üè∑Ô∏è Name a Device
            </button>
            <button onclick="refreshDevices()" style="width: 100%; background: #3b82f6;">
              üîÑ Quick Refresh
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="speedtest-tab" class="tab-content">
      <div class="card">
        <h2>
          üöÄ Speed Test History
          <button class="refresh-btn" onclick="runSpeedTest()" style="background: #f59e0b;">‚ñ∂ Run Test</button>
        </h2>
        <div class="chart-container">
          <canvas id="speedChart"></canvas>
        </div>
        <div id="speedTestResults" style="margin-top: 20px; padding: 15px; background: #f9fafb; border-radius: 8px; display: none;">
          <h3 style="margin-top: 0; color: #667eea;">Latest Test Results</h3>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
            <div>
              <div style="font-size: 0.85em; color: #666;">‚¨áÔ∏è Download</div>
              <div style="font-size: 1.8em; font-weight: bold; color: #667eea;" id="latestDownload">--</div>
              <div style="font-size: 0.85em; color: #999;">Mbps</div>
            </div>
            <div>
              <div style="font-size: 0.85em; color: #666;">‚¨ÜÔ∏è Upload</div>
              <div style="font-size: 1.8em; font-weight: bold; color: #f59e0b;" id="latestUpload">--</div>
              <div style="font-size: 0.85em; color: #999;">Mbps</div>
            </div>
            <div>
              <div style="font-size: 0.85em; color: #666;">üì° Ping</div>
              <div style="font-size: 1.8em; font-weight: bold; color: #10b981;" id="latestPing">--</div>
              <div style="font-size: 0.85em; color: #999;">ms</div>
            </div>
          </div>
          <div style="margin-top: 10px; font-size: 0.85em; color: #666;">
            <strong>Server:</strong> <span id="latestServer">--</span> | 
            <strong>ISP:</strong> <span id="latestISP">--</span>
          </div>
        </div>
      </div>
    </div>

    <div id="tasks-tab" class="tab-content">
      <div class="card">
        <h2>‚è∞ Scheduled Tasks</h2>
        <div id="taskList">
          <p style="text-align: center; color: #999; padding: 20px;">Loading tasks...</p>
        </div>
      </div>
    </div>

    <!-- Device Naming Modal -->
    <div id="nameDeviceModal" class="modal">
      <div class="modal-content">
        <h3>ÔøΩÔ∏èi Assign Device Name</h3>
        <div class="form-group">
          <label>Select Device</label>
          <select id="deviceToName" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
            <option value="">Loading devices...</option>
          </select>
        </div>
        <div class="form-group">
          <label>Friendly Name</label>
          <input type="text" id="deviceFriendlyName" placeholder="e.g., Gaming PC, Living Room TV" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
        </div>
        <div class="button-group">
          <button onclick="assignDeviceName()">Save Name</button>
          <button onclick="hideNameDeviceModal()" style="background: #6b7280;">Cancel</button>
        </div>
      </div>
    </div>

    <div id="homeassistant-tab" class="tab-content">
      <div class="card">
        <h2>üè† Home Assistant</h2>
        <div id="haStatus" style="margin-bottom: 20px;">
          <p style="color: #999;">Checking connection...</p>
        </div>
        
        <h3>üí° Lights</h3>
        <div id="lightsList" class="device-list">
          <p style="text-align: center; color: #999; padding: 20px;">Loading lights...</p>
        </div>
        
        <h3 style="margin-top: 30px;">üîå Switches</h3>
        <div id="switchesList" class="device-list">
          <p style="text-align: center; color: #999; padding: 20px;">Loading switches...</p>
        </div>
        
        <h3 style="margin-top: 30px;">üìä Sensors</h3>
        <div id="sensorsList" class="device-list">
          <p style="text-align: center; color: #999; padding: 20px;">Loading sensors...</p>
        </div>
        
        <h3 style="margin-top: 30px;">üîß ESP Devices</h3>
        <div id="espList" class="device-list">
          <p style="text-align: center; color: #999; padding: 20px;">Loading ESP devices...</p>
        </div>
      </div>
    </div>

    <div id="plugins-tab" class="tab-content">
      <div class="card">
        <h2>üîå Plugins</h2>
        <div id="pluginStats" style="margin-bottom: 20px;">
          <p style="color: #999;">Loading plugin stats...</p>
        </div>
        <div id="pluginsList">
          <p style="text-align: center; color: #999; padding: 20px;">Loading plugins...</p>
        </div>
      </div>
    </div>

    <div id="research-tab" class="tab-content">
      <div class="card">
        <h2>üìö Research History</h2>
        <div id="researchList">
          <p style="text-align: center; color: #999; padding: 20px;">Loading research...</p>
        </div>
      </div>
    </div>

    <div id="settings-tab" class="tab-content">
      <div class="card">
        <h2>‚öôÔ∏è Settings</h2>
        
        <h3>üë• Dashboard Users</h3>
        <p style="font-size: 0.9em; color: #666; margin-bottom: 15px;">
          Manage users who can access this web dashboard
        </p>
        <div id="userManagement">
          <button onclick="showAddUserForm()">‚ûï Add User</button>
          <button onclick="showChangePasswordForm()" style="background: #f59e0b; margin-left: 10px;">üîë Change Password</button>
          
          <!-- Add User Modal -->
          <div id="addUserModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
            <div style="background: white; padding: 30px; border-radius: 10px; max-width: 500px; width: 90%;">
              <h3 style="margin-top: 0;">Add New User</h3>
              <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px; color: #666;">Username</label>
                <input type="text" id="newUsername" placeholder="Enter username" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
              </div>
              <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px; color: #666;">Password</label>
                <input type="password" id="newPassword" placeholder="Enter password" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
              </div>
              <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 5px; color: #666;">Role</label>
                <select id="newUserRole" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                  <option value="viewer">Viewer (Read-only)</option>
                  <option value="operator">Operator (Can execute commands)</option>
                  <option value="admin">Admin (Full access)</option>
                </select>
              </div>
              <div style="display: flex; gap: 10px;">
                <button onclick="addUser()" style="flex: 1;">Create User</button>
                <button onclick="hideAddUserForm()" style="flex: 1; background: #6b7280;">Cancel</button>
              </div>
            </div>
          </div>
          
          <!-- Change Password Modal -->
          <div id="changePasswordModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
            <div style="background: white; padding: 30px; border-radius: 10px; max-width: 500px; width: 90%;">
              <h3 style="margin-top: 0;">Change Password</h3>
              <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px; color: #666;">Current Password</label>
                <input type="password" id="currentPassword" placeholder="Enter current password" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
              </div>
              <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px; color: #666;">New Password</label>
                <input type="password" id="newPasswordChange" placeholder="Enter new password" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
              </div>
              <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 5px; color: #666;">Confirm New Password</label>
                <input type="password" id="confirmPassword" placeholder="Confirm new password" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
              </div>
              <div style="display: flex; gap: 10px;">
                <button onclick="changePassword()" style="flex: 1; background: #f59e0b;">Change Password</button>
                <button onclick="hideChangePasswordForm()" style="flex: 1; background: #6b7280;">Cancel</button>
              </div>
            </div>
          </div>
          
          <div id="usersList" style="margin-top: 20px;">
            <p style="color: #999;">Loading users...</p>
          </div>
        </div>
        
        <h3 style="margin-top: 40px;">üéÆ Discord Users</h3>
        <p style="font-size: 0.9em; color: #666; margin-bottom: 15px;">
          Manage Discord user permissions for bot commands
        </p>
        <div id="discordUserManagement">
          <button onclick="showAddDiscordUserForm()">‚ûï Add Discord User</button>
          
          <!-- Add Discord User Modal -->
          <div id="addDiscordUserModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
            <div style="background: white; padding: 30px; border-radius: 10px; max-width: 500px; width: 90%;">
              <h3 style="margin-top: 0;">Add Discord User</h3>
              <div style="background: #f3f4f6; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                <p style="font-size: 0.9em; color: #666; margin-bottom: 10px;">
                  <strong>üí° How to get Discord User ID:</strong>
                </p>
                <ol style="font-size: 0.85em; color: #666; margin: 0; padding-left: 20px; line-height: 1.6;">
                  <li>Enable Developer Mode: Discord Settings ‚Üí Advanced ‚Üí Developer Mode</li>
                  <li>Right-click the user (in member list or chat) ‚Üí Copy User ID</li>
                  <li>Paste the ID below (17-19 digit number)</li>
                </ol>
                <p style="font-size: 0.85em; color: #666; margin-top: 12px; margin-bottom: 0;">
                  <strong>About Discord names:</strong><br>
                  ‚Ä¢ <strong>Username</strong>: Unique identifier (@username) - lowercase, no spaces<br>
                  ‚Ä¢ <strong>Display Name</strong>: How they appear in Discord - can have uppercase, emojis, spaces<br>
                  ‚Ä¢ Either can be entered above for reference (permissions use User ID only)
                </p>
              </div>
              <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px; color: #666;">Discord User ID</label>
                <input type="text" id="newDiscordUserId" placeholder="123456789012345678" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
              </div>
              <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px; color: #666;">Discord Username or Display Name</label>
                <input type="text" id="newDiscordUsername" placeholder="dragohn, _dragohn_, @username, or Display Name" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                <small style="color: #999; font-size: 0.85em;">
                  Enter username (can include underscores like _dragohn_) or display name for reference. This is just a label - permissions are based on User ID.
                </small>
              </div>
              <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 5px; color: #666;">Role</label>
                <select id="newDiscordUserRole" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                  <option value="viewer">Viewer (Read-only)</option>
                  <option value="operator">Operator (Can execute commands)</option>
                  <option value="admin">Admin (Full access)</option>
                </select>
              </div>
              <div style="display: flex; gap: 10px;">
                <button onclick="addDiscordUser()" style="flex: 1;">Add User</button>
                <button onclick="hideAddDiscordUserForm()" style="flex: 1; background: #6b7280;">Cancel</button>
              </div>
            </div>
          </div>
          
          <div id="discordUsersList" style="margin-top: 20px;">
            <p style="color: #999;">Loading Discord users...</p>
          </div>
        </div>
        
        <h3 style="margin-top: 30px;">üé≠ Bot Personality</h3>
        <p style="font-size: 0.9em; color: #666; margin-bottom: 15px;">
          Change the bot's personality for Discord chat interactions. Each Discord user can have their own personality setting.
        </p>
        <div id="personalitySection">
          <div style="margin-bottom: 15px;">
            <label style="display: block; margin-bottom: 5px; color: #666;">Discord User ID</label>
            <input type="text" id="personalityUserId" placeholder="Enter Discord User ID" style="width: 300px; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
            <button onclick="loadUserPersonality()" style="margin-left: 10px;">Load</button>
          </div>
          <div id="personalityDisplay" style="display: none; margin-bottom: 15px; padding: 15px; background: #f3f4f6; border-radius: 8px;">
            <p><strong>Current:</strong> <span id="currentPersonalityName">-</span></p>
          </div>
          <div id="personalityOptions" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 10px; margin-top: 15px;">
            <p style="color: #999;">Enter a Discord User ID and click Load to manage personality</p>
          </div>
        </div>
        
        <h3 style="margin-top: 30px;">üíæ SMB Status</h3>
        <div id="smbStatus">
          <p style="color: #999;">Loading SMB status...</p>
          <p style="font-size: 0.9em; color: #666; margin-top: 10px;">
            ‚ÑπÔ∏è SMB is configured via .env file. Edit SMB_HOST, SMB_USERNAME, SMB_PASSWORD, and SMB_SHARE in your .env file.
          </p>
        </div>
        
        <h3 style="margin-top: 30px;">üè† Home Assistant Status</h3>
        <div id="haConfigStatus">
          <p style="color: #999;">Loading Home Assistant status...</p>
          <p style="font-size: 0.9em; color: #666; margin-top: 10px;">
            ‚ÑπÔ∏è Home Assistant is configured via .env file. Edit HA_URL and HA_TOKEN in your .env file.
          </p>
        </div>
      </div>
    </div>
  </div>

  <script src="/dashboard.js"></script>
</body>
</html>
